server {
	listen 80;
	
	# TODO SSL CERT STUFF
	#listen [::]:443 ssl ipv6only=on http2;
	#listen 443 ssl http2;

	# server_name fqd-of-your-service.example.com;

	gzip on;
	gzip_types text/plain text/css application/javascript application/json application/xml;

	location / {
		proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-Host $host;
		proxy_pass http://admin:3000;
	}

	# Bot's service doesn't need to be exposed to the outside world, if it will be only
	# communicated with through the admin. But we still need to expose bot's webhook:
	location /bot {
		proxy_pass http://backend:3001/bot;
	}
	# ... and notification API:
	location /notify {
		proxy_pass http://backend:3001/notify;
	}

	# TODO	
	# ssl_certificate /etc/letsencrypt/live/notifier.religiosa.ru/fullchain.pem;
	# ssl_certificate_key /etc/letsencrypt/live/notifier.religiosa.ru/privkey.pem;
	# include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
	# ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}
# server {
# 	listen 80;
# 	listen [::]:80;
# 	return 301 https://$host$request_uri;
# }